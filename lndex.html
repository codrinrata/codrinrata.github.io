<!DOCTYPE html>
<html lang="en">
<head>
    <title>University Week - CDRN</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .week-display {
            background: #fff;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            text-align: center;
        }
        .week-number {
            font-size: 4rem;
            font-weight: bold;
            color: #111;
            margin: 1rem 0;
        }
        .week-type {
            font-size: 1.5rem;
            color: #666;
            margin: 0.5rem 0;
            text-transform: capitalize;
        }
        .week-dates {
            font-size: 1rem;
            color: #888;
            margin: 0.5rem 0;
        }
        .semester-info {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 2px solid #f0f0f0;
            color: #666;
        }
        .holiday-notice {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 4px;
            color: #856404;
        }
        .no-semester {
            color: #888;
            font-style: italic;
        }
        .error {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 4px;
            color: #721c24;
        }
        
        /* PRANK STYLES */
        .popup {
            position: fixed;
            background: white;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            z-index: 9999;
            min-width: 300px;
            max-width: 400px;
        }
        
        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .close-btn {
            cursor: pointer;
            background: #ff4444;
            color: white;
            border: none;
            border-radius: 3px;
            padding: 5px 10px;
            font-size: 18px;
        }
        
        .close-btn:hover {
            background: #cc0000;
        }
        
        .popup-content {
            margin: 15px 0;
        }
        
        .popup-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .popup-button {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .accept-btn {
            background: #4CAF50;
            color: white;
        }
        
        .decline-btn {
            background: #f44336;
            color: white;
        }
        
        .ad-popup {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
        }
        
        .ad-popup h2 {
            margin: 0 0 10px 0;
            font-size: 24px;
        }
        
        .ad-content {
            background: rgba(255,255,255,0.9);
            color: #333;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .blinking {
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50%, 100% { opacity: 1; }
            25%, 75% { opacity: 0.5; }
        }
        
        .shake {
            animation: shake 0.5s infinite;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="week-display" id="weekDisplay">
            <div>Loading...</div>
        </div>
    </div>

    <script>
        // Original week display code
        async function loadWeekInfo() {
            try {
                const response = await fetch('uni-config.json');
                const config = await response.json();
                displayWeekInfo(config);
                
                // Start the prank after content loads
                setTimeout(startPrank, 1000);
            } catch (error) {
                document.getElementById('weekDisplay').innerHTML = `
                    <div class="error">
                        <strong>Eroare:</strong> Nu s-a putut √ÆncƒÉrca configura»õia anului universitar.
                    </div>
                `;
            }
        }

        function displayWeekInfo(config) {
            const urlParams = new URLSearchParams(window.location.search);
            const dateParam = urlParams.get('date');
            
            let today;
            if (dateParam) {
                today = new Date(dateParam + 'T12:00:00');
            } else {
                today = new Date();
            }
            today.setHours(0, 0, 0, 0);
            
            let currentSemester = null;
            for (const semester of config.semesters) {
                const semesterStart = new Date(semester.startDate);
                const semesterEnd = new Date(semester.endDate);
                
                if (today >= semesterStart && today <= semesterEnd) {
                    currentSemester = semester;
                    break;
                }
            }

            const display = document.getElementById('weekDisplay');
            
            if (!currentSemester) {
                display.innerHTML = `
                    <div class="week-number">‚Äî</div>
                    <div class="no-semester">Nu suntem √Æn semestru momentan</div>
                    <div class="semester-info">
                        ${config.university || ''}<br>
                        An universitar: ${config.academicYear}<br>
                        Data curentƒÉ: ${today.toLocaleDateString('ro-RO', { 
                            weekday: 'long', 
                            year: 'numeric', 
                            month: 'long', 
                            day: 'numeric' 
                        })}
                    </div>
                `;
                return;
            }

            let currentWeek = null;
            for (let i = 0; i < currentSemester.weeks.length; i++) {
                const week = currentSemester.weeks[i];
                const weekStart = new Date(week.startDate + 'T12:00:00');
                weekStart.setHours(0, 0, 0, 0);
                let weekEnd;
                
                if (week.endDate) {
                    weekEnd = new Date(week.endDate + 'T12:00:00');
                    weekEnd.setHours(0, 0, 0, 0);
                } else {
                    const nextWeek = currentSemester.weeks[i + 1];
                    if (nextWeek) {
                        const nextWeekStart = new Date(nextWeek.startDate + 'T12:00:00');
                        nextWeekStart.setHours(0, 0, 0, 0);
                        weekEnd = new Date(nextWeekStart);
                        weekEnd.setDate(weekEnd.getDate() - 1);
                    } else {
                        weekEnd = new Date(weekStart);
                        weekEnd.setDate(weekEnd.getDate() + 6);
                    }
                }
                
                if (today >= weekStart && today <= weekEnd) {
                    currentWeek = week;
                    break;
                }
            }

            let holidayInfo = '';
            let currentHoliday = null;
            for (const holiday of currentSemester.holidays) {
                const holidayStart = new Date(holiday.startDate + 'T12:00:00');
                holidayStart.setHours(0, 0, 0, 0);
                const holidayEnd = new Date(holiday.endDate + 'T12:00:00');
                holidayEnd.setHours(0, 0, 0, 0);
                
                if (today >= holidayStart && today <= holidayEnd) {
                    currentHoliday = holiday;
                    holidayInfo = `
                        <div class="holiday-notice">
                            <strong>üéâ ${holiday.name}</strong>
                        </div>
                    `;
                    break;
                }
            }

            if (currentWeek) {
                const weekStart = new Date(currentWeek.startDate + 'T12:00:00');
                weekStart.setHours(0, 0, 0, 0);
                let weekEnd;
                
                if (currentWeek.endDate) {
                    weekEnd = new Date(currentWeek.endDate + 'T12:00:00');
                    weekEnd.setHours(0, 0, 0, 0);
                } else {
                    const weekIndex = currentSemester.weeks.indexOf(currentWeek);
                    const nextWeek = currentSemester.weeks[weekIndex + 1];
                    
                    if (nextWeek) {
                        const nextWeekStart = new Date(nextWeek.startDate + 'T12:00:00');
                        nextWeekStart.setHours(0, 0, 0, 0);
                        weekEnd = new Date(nextWeekStart);
                        weekEnd.setDate(weekEnd.getDate() - 1);
                    } else {
                        weekEnd = new Date(weekStart);
                        weekEnd.setDate(weekEnd.getDate() + 6);
                    }
                }
                
                const weekTypeLabels = {
                    'teaching': 'Activitate didacticƒÉ',
                    'study': 'SƒÉptƒÉm√¢nƒÉ de studiu',
                    'exams': 'Sesiune examene',
                    'makeup-exams': 'Sesiune restan»õe / MƒÉriri note',
                    'holiday': 'Vacan»õƒÉ'
                };
                
                let weekNumberDisplay;
                let weekTypeDisplay;
                
                if (currentHoliday) {
                    const holidayStart = new Date(currentHoliday.startDate + 'T12:00:00');
                    holidayStart.setHours(0, 0, 0, 0);
                    const holidayEnd = new Date(currentHoliday.endDate + 'T12:00:00');
                    holidayEnd.setHours(0, 0, 0, 0);
                    const isMultiDay = holidayStart.getTime() !== holidayEnd.getTime();
                    
                    if (!isMultiDay && currentWeek.type === 'teaching') {
                        weekNumberDisplay = currentHoliday.name;
                        weekTypeDisplay = `SƒÉptƒÉm√¢na ${currentWeek.weekNumber}`;
                    } else {
                        if (typeof currentWeek.weekNumber === 'number') {
                            weekNumberDisplay = `SƒÉptƒÉm√¢na ${currentWeek.weekNumber}`;
                        } else {
                            weekNumberDisplay = currentWeek.weekNumber;
                        }
                        weekTypeDisplay = weekTypeLabels[currentWeek.type] || currentWeek.type;
                    }
                } else {
                    if (typeof currentWeek.weekNumber === 'number') {
                        weekNumberDisplay = `SƒÉptƒÉm√¢na ${currentWeek.weekNumber}`;
                    } else {
                        weekNumberDisplay = currentWeek.weekNumber;
                    }
                    weekTypeDisplay = weekTypeLabels[currentWeek.type] || currentWeek.type;
                }
                
                display.innerHTML = `
                    <div class="week-number">${weekNumberDisplay}</div>
                    <div class="week-type">${weekTypeDisplay}</div>
                    <div class="week-dates">
                        ${weekStart.toLocaleDateString('ro-RO', { day: 'numeric', month: 'short' })} - 
                        ${weekEnd.toLocaleDateString('ro-RO', { day: 'numeric', month: 'short', year: 'numeric' })}
                    </div>
                    ${holidayInfo}
                    <div class="semester-info">
                        ${currentSemester.name}<br>
                        ${config.university || ''}<br>
                        An universitar: ${config.academicYear}
                    </div>
                `;
            } else {
                display.innerHTML = `
                    <div class="week-number">‚Äî</div>
                    <div class="no-semester">Informa»õii despre sƒÉptƒÉm√¢nƒÉ indisponibile</div>
                    ${holidayInfo}
                    <div class="semester-info">
                        ${currentSemester.name}<br>
                        ${config.university || ''}<br>
                        An universitar: ${config.academicYear}
                    </div>
                `;
            }
        }

        // PRANK CODE STARTS HERE
        let popupCount = 0;
        
        function randomPosition() {
            const x = Math.random() * (window.innerWidth - 400);
            const y = Math.random() * (window.innerHeight - 300);
            return { x: Math.max(0, x), y: Math.max(0, y) };
        }
        
        function createCookiePopup() {
            popupCount++;
            const popup = document.createElement('div');
            popup.className = 'popup';
            const pos = randomPosition();
            popup.style.left = pos.x + 'px';
            popup.style.top = pos.y + 'px';
            
            popup.innerHTML = `
                <div class="popup-header">
                    üç™ Cookie Notice #${popupCount}
                    <button class="close-btn" onclick="this.parentElement.parentElement.remove()">√ó</button>
                </div>
                <div class="popup-content">
                    We use cookies to track everything you do. By continuing to use this site, 
                    you agree to sell us your soul and all your personal data.
                </div>
                <div class="popup-buttons">
                    <button class="popup-button accept-btn" onclick="acceptCookies(this)">Accept All</button>
                    <button class="popup-button decline-btn" onclick="declineCookies(this)">Decline</button>
                </div>
            `;
            
            document.body.appendChild(popup);
        }
        
        function createAdPopup() {
            const ads = [
                {
                    title: "üé∞ YOU WON $1,000,000!",
                    content: "Congratulations! You are our 1000th visitor! Click here to claim your prize!",
                    style: "blinking"
                },
                {
                    title: "‚ö†Ô∏è VIRUS DETECTED!",
                    content: "Your computer has 37 viruses! Download our antivirus NOW!",
                    style: "shake"
                },
                {
                    title: "üíä Doctors HATE This!",
                    content: "Lose 50kg in 3 days with this one weird trick!",
                    style: ""
                },
                {
                    title: "üì± New iPhone Giveaway!",
                    content: "Be the 100th person to click and win a FREE iPhone 25 Pro Max Ultra!",
                    style: "blinking"
                },
                {
                    title: "üî• Hot Singles in Your Area!",
                    content: "3.7 billion singles are waiting to meet you RIGHT NOW!",
                    style: ""
                }
            ];
            
            const ad = ads[Math.floor(Math.random() * ads.length)];
            const popup = document.createElement('div');
            popup.className = 'popup ad-popup ' + ad.style;
            const pos = randomPosition();
            popup.style.left = pos.x + 'px';
            popup.style.top = pos.y + 'px';
            
            popup.innerHTML = `
                <div class="popup-header">
                    ${ad.title}
                    <button class="close-btn" onclick="this.parentElement.parentElement.remove()">√ó</button>
                </div>
                <div class="ad-content">
                    ${ad.content}
                </div>
                <div class="popup-buttons">
                    <button class="popup-button accept-btn" onclick="this.parentElement.parentElement.remove()">
                        CLICK HERE NOW!!!
                    </button>
                </div>
            `;
            
            document.body.appendChild(popup);
        }
        
        function acceptCookies(btn) {
            // Accepting cookies spawns MORE popups!
            btn.closest('.popup').remove();
            createCookiePopup();
            setTimeout(createCookiePopup, 500);
        }
        
        function declineCookies(btn) {
            // Declining also spawns popups because you can't escape!
            btn.closest('.popup').remove();
            alert("Sorry, you cannot decline cookies on this website!");
            createCookiePopup();
        }
        
        function startPrank() {
            // Initial cookie popup
            setTimeout(createCookiePopup, 1000);
            
            // More cookie popups
            setTimeout(createCookiePopup, 3000);
            setTimeout(createCookiePopup, 5000);
            
            // Ad popups
            setTimeout(createAdPopup, 2000);
            setTimeout(createAdPopup, 4500);
            setTimeout(createAdPopup, 7000);
            
            // Continuous spam
            setInterval(() => {
                if (Math.random() > 0.6) {
                    createCookiePopup();
                }
                if (Math.random() > 0.7) {
                    createAdPopup();
                }
            }, 3000);
        }
        
        // Prevent easy escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                e.preventDefault();
                createAdPopup();
                alert("Nice try! üòà");
            }
        });

        // Load week info when page loads
        loadWeekInfo();
    </script>
</body>
</html>
